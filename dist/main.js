(()=>{"use strict";class e{constructor(e){if(!e)throw new Error("A selector param is required");this.field=document.querySelector(e),this.errorElem=this.field.nextElementSibling,this.validIcon=this.errorElem.nextElementSibling,this.active=!1,this.rules=[],this.init()}init(){this.field.addEventListener("blur",this.validateOnBlur.bind(this)),this.field.addEventListener("input",this.validateOnInput.bind(this))}validateOnBlur(){this.active||(this.active=!0),this.validate()}validateOnInput(){this.active&&this.validate()}addRule(e,t){this.rules.unshift({checkIfValid:e,errorMessage:t})}validate(){const e=this.rules.find((e=>!e.checkIfValid(this.field.value)));e?this.showMessage(!1,e.errorMessage):this.showMessage(!0)}showMessage(e,t){this.errorElem.textContent="",e?(this.validIcon.style.display="block",this.field.classList.remove("is-invalid"),this.field.classList.add("is-valid")):(this.validIcon.style.display="none",this.field.classList.remove("is-valid"),this.field.classList.add("is-invalid"),this.errorElem.textContent=t)}}const t=new e(".js-email"),s=new e(".js-password"),i=new e(".js-password-confirm"),a=new e(".js-country"),d=new e(".js-zip-code");t.addRule((e=>/^\S+@\S+\.\S+$/g.test(e)),"Invalid email address."),t.addRule((e=>""!==e.trim()),"Email is required."),s.addRule((e=>/[^0-9a-zA-Z]/.test(e)),"Password must contain at least one special character."),s.addRule((e=>/[A-Z]/.test(e)),"Password must contain at least one uppercase letter."),s.addRule((e=>/[0-9]/.test(e)),"Password must contain at least one number."),s.addRule((e=>(i.validateOnInput(),/^.{8,}$/.test(e))),"Password must be at least 8 characters long."),i.addRule((e=>e===s.field.value),"Password doesn't match");const l=Object.create({toString:()=>({ch:"Switzerland ZIPs must have exactly 4 digits: e.g. CH-1950 or 1950",fr:"France ZIPs must have exactly 5 digits: e.g. F-75012 or 75012",de:"Germany ZIPs must have exactly 5 digits: e.g. D-12345 or 12345",nl:"Netherland ZIPs must have exactly 4 digits, followed by 2 letters except SA, SD and SS"}[a.field.value])});d.addRule((e=>(e=>({ch:/^(CH-)?\d{4}$/i,fr:/^(F-)?\d{5}$/i,de:/^(D-)?\d{5}$/i,nl:/^(NL-)?\d{4}\s*([A-RT-Z][A-Z]|S[BCE-RT-Z])$/i}[a.field.value].test(e)))(e)),l),d.addRule((e=>""!==e.trim()),"Zip Code is required."),a.field.addEventListener("change",(()=>d.validateOnInput())),document.querySelector(".js-submit").addEventListener("click",(e=>{e.preventDefault();const l=[t,s,i,a,d];l.forEach((e=>e.validateOnBlur())),console.log(document.querySelector(".is-invalid")),document.querySelector(".is-invalid")||(document.querySelector(".js-congrats").classList.remove("card--hidden"),l.forEach((e=>{const t=()=>{document.querySelector(".js-congrats").classList.add("card--hidden"),e.field.removeEventListener("input",t)};e.field.addEventListener("input",t)})))}))})();
//# sourceMappingURL=main.js.map